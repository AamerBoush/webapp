<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>عداد الضغط</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<button onclick="increase()">اضغط</button>
<p>العدد: <span id="count">0</span></p>

<script>
Telegram.WebApp.ready();

let count = 0;
const initData = Telegram.WebApp.initData;

async function increase() {
  const res = await fetch("https://webapp-wxag.onrender.com/click", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ initData })
  });

  const data = await res.json();
  if (data.ok) {
    count = data.count;
    document.getElementById("count").innerText = count;
  } else {
    alert("طلب مرفوض");
  }
}
</script>

</body>
</html>
