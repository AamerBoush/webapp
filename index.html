<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>عداد الضغط</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<button id="btn">اضغط</button>
<p>العدد: <span id="count">0</span></p>

<script>
Telegram.WebApp.ready();

// مهم: هذا يجب أن يكون غير فارغ
const initData = Telegram.WebApp.initData;

document.getElementById("btn").onclick = async () => {
  const body = new URLSearchParams();
  body.append("initData", initData);

  const res = await fetch(
    "https://webapp-1-7ti3.onrender.com/click",
    {
      method: "POST",
      body: body
    }
  );

  const data = await res.json();

  if (data.ok) {
    document.getElementById("count").innerText = data.count;
  } else {
    alert(data.error);
  }
};
</script>

</body>
</html>
